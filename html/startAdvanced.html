<!doctype html>
<html>

<!-- Authors: Phill Conrad, Evan Crook, Kevin Malta-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>The Beginning of the Next Steps of Project Awesome.</title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <script src="../purl/purl.js"></script>
    <script src="../js/questions/orderOfOperations.js"></script>
    <script src="../js/questions/changeOfBase.js"></script>
    <script src="../js/questions/operandsAndOperators.js"></script>
    <script src="../js/questions/pythonProgramOutput.js"></script>
    <script src="../js/questions/pythonStringSlice.js"></script>
    <script src="../js/questions/symbolicLogic.js"></script>
    <script src="../js/questions/CvariableType.js"></script>
    <script src="../js/questions/strings.js"></script>
    <script src="../js/questionTypes.js"></script>

    <style>
      #jsontextarea {font-size:120%;}
    </style>

</head>

<body>

    <header>
        <h1>AwesomeNextSteps Advanced Quiz Builder</h1>
        <p>The Beginning of the Next Steps of Project Awesome.</p>
    </header>

    <p>
    <h3>Set up your quiz:</h3>
    
    <div id="setupdiv" style="float:left; margin:0px 50px">            
            <form id="inputs">
                Choose the types and amounts of questions you'd like your quiz to have. <br>
                Order of Operations: <input type="number" name="orderOfOperations" value="0"></input> <br>
                Change of Base: <input type="number" name="changeOfBase" value="0"></input> <br>
                Operands and Operators: <input type="number" name="operandsAndOperators" value="0"></input> <br>
                Python String Slicing: <input type="number" name="pythonStringSlice" value="0"></input> <br>
                Simple Python Programs: <input type="number" name="pythonProgramOutput" value="0"></input> <br>
                Python Strings: <input type="number" name="pyStrings" value="0"></input> <br>
                C Strings: <input type="number" name="cStrings" value="0"></input> <br>
                C Variable Types: <input type="number" name="CvariableType" value="0"></input> <br>
                Symbolic Logic: <input type="number" name="symbolicLogic" value="0"></input> <br> <br>
            </form>

    <br> <input type="button" onclick="makeQuizJSON()" value="Build JSON" /> <br>
    <p>Or, if you don't want to deal with JSON, try the <a href="./start.html">simple interface</a> instead.</p>
    </div>
	
    <div id="jsondiv" style="float:left; margin:0px 50px">
    <form id="quizbuilder" action="quiz.html" method="get">
        <p>Paste in some JSON that describes the quiz you want, or build it using the interface to the left. <br> </p>
        <textarea rows="10" cols="50" id="jsontextarea" name="jsonString"></textarea>
        <br> <br>

        Enter a seed (in hexadecimal) for this quiz.
        (If none is provided, one will be generated randomly.) <br>
        Seed: <input type="text" name="seed"> <br>

        Quiz Title: <input type="text" id="quizTitle"> <br> <br> <br>

        <p>Show questions:
        <select name="showQuestions" value="yes">
            <option value="yes">yes</option>
            <option value="no">no</option>
        </select> <br>

        Show answer key:
        <select name="showKey" value="yes">
            <option value="yes">yes</option>
            <option value="no">no</option>
        </select> <br>

        Show JSON:
        <select name="showJSON" value="yes">
            <option value="yes">yes</option>
            <option value="no">no</option>
        </select> <br>
        </p>

        <button type="submit">Get Quiz</button>
    </form>
    </div>
    
    </p>

    <script>
    function makeQuizJSON(){

		var quiz = [];
		$.each($('#setupdiv #inputs').serializeArray(), function(i, field) {
			var questionObject = {};
			questionObject["question"] = field.name; //the name property of the input is the question type
			questionObject["repeat"] = field.value; //the number of times is the value entered in the input
			if (questionObject["repeat"]>0) 
	        	quiz.push(questionObject); //store it in the quiz array ONLY IF not zero
		});	

		//Build and stringify a valid QuizJSON object
		var quizObject = {};
		quizObject["version"] = 0.1;
		quizObject["title"] = $("#quizTitle").val();
		quizObject["quiz"] = quiz;
		var jsonString = JSON.stringify(quizObject);

		//Put the JSON generated in the text area for display
		//(and for grabbing by the "submit" button and sticking into the GET request) 
	    $("#jsontextarea").val(jsonString);
	}
    </script>

</body>

</html>
